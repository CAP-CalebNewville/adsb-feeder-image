{% extends 'base.html' %}
{% set active_page = "advanced" %}

{% block content %}
<h1>{% block title %} Setup optional parameters {% endblock %}</h1>

<p>
<form method="post">
<button type="submit" class="bigbigbutton" name="tar1090" value="go">I'm done here - take me to the website</button>
</form>
<p>
<form method="post">
    <div class="row no-gutters">
        <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="privacy" id="privacy" {{ metadata['privacy'] }}/>
        <label for="privacy" class="mb-3 col-sm-11">Enable privacy flag (ON = does not show on <a href="https://map.adsb.lol/syncmap/">public aggregator maps</a>)</label><br/>
        <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="route" id="route" {{ metadata['route'] }}/>
        <label for="route" class="mb-3 col-sm-11">Use adsb.lol Route API to show flight routes when known.</label>
        <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="heywhatsthat" id="heywhatsthat" {{ metadata['heywhatsthat'] }}/>
        <div class="col-sm-11 no-gutters">
            <label for="heywhatsthat" class="mb-3 col-sm-11">
                <a href="https://www.heywhatsthat.com/">HeyWhat'sThat</a> is an incredibly cool web service that allows you
                to discover what you should be able to see from the location of your antenna - including estimates for how
                far away you should be able to detect planes (depending on their altitude - and assuming there are no other
                obstructions).
            </label>
            <div class="col-sm-11 mb-1" id="hwt-text"
                 style="display: {% if metadata['heywhatsthat'] == '1' and metadata['FEEDER_HEYWHATSTHAT_ID'] == '' %} block {% else %} none {% endif %}">
                Click on the link, select "New Panorama" at the top, enter your address (or find the location
                on the map), enter a title on the lower left and click "Submit request". After a couple of minutes you'll
                be offered to look at your panorama. At the top left you'll see the title you just entered, the latitude
                and longitude and elevation - and below that a link that starts ends with <code>/?view=CODE</code>.
                Enter this code here to see the theoretical range information on your receiver map.
            </div>
            <input type="text" id="HEYWHATSTHAT_ID" name="FEEDER_HEYWHATSTHAT_ID" class="form-control col-sm-6 ml-1 mb-2"
               placeholder=" HeyWhat'sThat Panorama ID" value="{{ env_values['FEEDER_HEYWHATSTHAT_ID'] }}">
        </div>
    </div>
    <div class="form-group">
        <button type="submit" name="submit" value="go" class="btn btn-primary">Submit</button>
    </div>
    <p>{{ message }} </p>
</form>
<script>
    function show_or_hide(b, f) {
        if (b.checked) f.style.display = "block"; else f.style.display = "none";
    }
    const hwt = document.getElementById('heywhatsthat');
    const hwttext = document.getElementById('hwt-text');
    hwt.addEventListener("change", function () {
        show_or_hide(hwt, hwttext);
    });
</script>
{% endblock %}
