{% extends 'base.html' %}

{% block content %}
<h1>{% block title %} Setup additional aggregators {% endblock %}</h1>

<div id="loader" style="display: none;"></div>
<div id="non-loader">
<form method="post">
<button type="submit" class="bigbigbutton" name="tar1090" value="go">I'm done here - take me to the website</button>
</form>

<form method="post">
    <div class="row no-gutters">
        <input type="checkbox" style="height: 1.4em;" class="mb-3 col-sm-1" name="fr24" id="fr24" {{ metadata['fr24'] }}/>
        <label for="fr24" class="mb-3 col-sm-11">Submit your data to <a href="https://www.flightradar24.com/privacy-policy">flightradar24</a></label>
        <div class="col-sm-1">&nbsp;</div>
        <div class="form-group col-sm-11 no-gutters" id="FR_FIELDS">
            <label for="FR24_ID" class="col-sm-8">flightradar24 sharing key<br/>(or enter you email address and click the button to request a sharing key)
                <input type="text" name="FEEDER_FR24_SHARING_KEY"
                       placeholder="existing flightradar24 sharing key or email address" class="form-control"
                       value="{{ env_values['FEEDER_FR24_SHARING_KEY'] }}">
            </label>
            <button type="submit" class="btn btn-primary" name="get-sharing-key" value="go" onclick="show_loader()">Request key</button>
        </div>
    </div>
    <!--
    <div class="form-group {{ 'visible' if metadata['adv_visible'] else 'invisible' }}">
        <button type="submit" class="btn btn-primary">Submit</button>
    </div>
    -->
    <div class="form-group {{ 'visible' if metadata['adv_visible'] else 'invisible' }}">
        <button type="submit" name="advanced" value="go" class="btn btn-secondary">Advanced configuration of base feeders</button>
    </div>
    <div class="form-group {{ 'visible' if metadata['adv_visible'] else 'invisible' }}">
        <button type="submit" name="expert" value="go" class="btn btn-secondary">Expert setup</button>
    </div>
</form>
</div>
    <script>
        const fr_24checkbox = document.getElementById('fr24');
        const fr_fields = document.getElementById('FR_FIELDS');
        fr_24checkbox.addEventListener('click', function handleClick() {
            if (fr_24checkbox.checked) {
                fr_fields.style.display = 'block';
            } else {
                fr_fields.style.display = 'none';
            }
            });
        function show_loader() {
            document.getElementById("loader").style.display = "block";
            document.getElementById("non-loader").style.display = "none";
        }
    </script>
{% endblock %}
